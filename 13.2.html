<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>
    <h1>Cabeçalho com um elemento <span>span</span>.</h1>
    <p>Um parágrafo com <span>um</span>, <span>dois</span> spans.
    </p>
</body>

</html>
<script>
  function byTagName(node, tagName) {
      
      var retorno = []; 
      
        for (var i = 0 ;i<node.childNodes.length;i++){
            if (node.childNodes[i].nodeType == document.ELEMENT_NODE) { 
                var nodeChild =  node.childNodes[i];
                
                if (nodeChild.nodeName.toLowerCase() == tagName.toLowerCase()){
                    retorno.push(nodeChild)
                }else if(nodeChild.childNodes.length > 0){
                    retorno = retorno.concat(byTagName(nodeChild,tagName));

                }
            }
                        
        }
      

      return retorno;
  }

  console.log(byTagName(document.body, "h1").length);
  // → 1
  console.log(byTagName(document.body, "span").length);
  // → 3
  var para = document.querySelector("p");
  console.log(byTagName(para, "span").length);
  // → 2
</script>